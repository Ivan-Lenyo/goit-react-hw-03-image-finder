(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{10:function(e,t,a){e.exports={ImageGalleryItem:"ImageGalleryItem_ImageGalleryItem__XbPfT",ImageGalleryItem_image:"ImageGalleryItem_ImageGalleryItem_image__2HEpu"}},11:function(e,t,a){e.exports={Overlay:"Modal_Overlay__1CUBf",Modal:"Modal_Modal__2WiGg"}},14:function(e,t,a){e.exports={App:"App_App__14UYh"}},15:function(e,t,a){e.exports={Button:"Button_Button__3YamI"}},16:function(e,t,a){e.exports={Loader:"Loader_Loader__1ZMLy"}},19:function(e,t,a){e.exports=a(47)},24:function(e,t,a){},47:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(7),l=a.n(o),c=(a(24),a(2)),i=a(3),m=a(5),s=a(4),u=a(8),g=(a(25),a(14)),h=a.n(g),p=a(6),d=a.n(p),f=a(18),y=function(e){Object(m.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={imageName:""},e.handleNameChange=function(t){e.setState({imageName:t.currentTarget.value.toLowerCase()})},e.handleSubmit=function(t){t.preventDefault(),""!==e.state.imageName.trim()?(e.props.onSubmit(e.state.imageName),e.setState({imageName:""})):u.b.error("Please enter name of search")},e}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("header",{className:d.a.searchbar},r.a.createElement("form",{className:d.a.form,onSubmit:this.handleSubmit},r.a.createElement("button",{type:"submit",className:d.a.button},r.a.createElement("span",{className:d.a.button_label},r.a.createElement(f.a,{className:d.a.reactIcons}))),r.a.createElement("input",{className:d.a.input,type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",value:this.state.imageName,onChange:this.handleNameChange})))}}]),a}(n.Component),b=a(12),v=a(9),_=a.n(v);var I={fetchImage:function(e,t){return fetch("https://pixabay.com/api/?q=".concat(e,"&page=").concat(t,"&key=23281316-63779c8712cdbe982715f9396&image_type=photo&orientation=horizontal&per_page=12")).then((function(t){return t.ok?t.json():Promise.reject(new Error("There are no images for name ".concat(e)))}))}},E=a(10),S=a.n(E),N=a(1),w=a.n(N);function k(e){var t=e.image,a=e.onImageClick;return r.a.createElement("li",{className:S.a.ImageGalleryItem},r.a.createElement("img",{src:t.webformatURL,alt:t.tag,className:S.a.ImageGalleryItem_image,onClick:function(){return a(t.largeImageURL)}}))}k.propType={image:w.a.shape({webformatURL:w.a.string,largeImageURL:w.a.string,tags:w.a.string}),onImageClick:w.a.func};var C=a(15),O=a.n(C);function j(e){var t=e.handleClickButton;return r.a.createElement("button",{type:"button",className:O.a.Button,onClick:t},"Load more")}var M=a(11),G=a.n(M),L=document.querySelector("#modal-root"),B=function(e){Object(m.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleKeyDown=function(t){"Escape"===t.code&&e.props.toggleModal()},e.handleOverlayClick=function(t){t.currentTarget===t.target&&e.props.toggleModal()},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyDown)}},{key:"render",value:function(){return Object(o.createPortal)(r.a.createElement("div",{className:G.a.Overlay,onClick:this.handleOverlayClick},r.a.createElement("div",{className:G.a.Modal},r.a.createElement("img",{src:this.props.largeImg,alt:""}))),L)}}]),a}(n.Component),x=a(16),T=a.n(x),A=a(17),F=a.n(A),U=(a(46),function(){return r.a.createElement("div",{className:T.a.Loader},r.a.createElement(F.a,{type:"Bars",color:"#00BFFF",height:100,width:100}))}),D="idle",P="pending",R="resolved",H="rejected",J=function(e){Object(m.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={images:[],page:1,error:null,loading:!1,status:D,showModal:!1,largeImg:""},e.handleClickButton=function(){e.setState((function(e){return{page:e.page+1}}))},e.toggleModal=function(){e.setState((function(e){return{showModal:!e.showModal}}))},e.onImageClick=function(t){e.setState({largeImg:t}),e.toggleModal()},e}return Object(i.a)(a,[{key:"componentDidUpdate",value:function(e,t){var a=this,n=e.imageName,r=this.props.imageName,o=this.state.page;n!==r?(this.setState({status:P}),I.fetchImage(r,o).then((function(e){e.hits.length>0?a.setState({images:e.hits,status:R}):a.setState({status:H})})).catch((function(e){a.setStatesetState({error:e,status:H})}))):t.page!==o&&1!==o&&(this.setState({loading:!0}),I.fetchImage(r,o).then((function(e){a.setState((function(t){return{images:[].concat(Object(b.a)(t.images),Object(b.a)(e.hits)),status:R}})),a.props.pageScroll()})).catch((function(){return a.setState({status:H})})).finally((function(){return a.setState({loading:!1})})))}},{key:"render",value:function(){var e=this,t=this.state,a=t.images,n=t.status,o=t.loading,l=t.largeImg,c=t.showModal;return"idle"===n?r.a.createElement("h2",{className:_.a.Title},"Waiting for search name"):"pending"===n?r.a.createElement(U,null):"rejected"===n?r.a.createElement("h2",{className:_.a.Title},"Something was wrong please try again!"):"resolved"===n?r.a.createElement(r.a.Fragment,null,r.a.createElement("ul",{className:_.a.ImageGallery},a.map((function(t){return r.a.createElement(k,{key:t.id,image:t,onImageClick:e.onImageClick})}))),o&&r.a.createElement(U,null),a.length>=12&&r.a.createElement(j,{handleClickButton:this.handleClickButton}),c&&r.a.createElement(B,{toggleModal:this.toggleModal,largeImg:l})):void 0}}]),a}(n.Component),K=function(e){Object(m.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={imageName:""},e.handleFormSubmit=function(t){e.setState({imageName:t})},e}return Object(i.a)(a,[{key:"pageScroll",value:function(){window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})}},{key:"render",value:function(){return r.a.createElement("div",{className:h.a.App},r.a.createElement(y,{onSubmit:this.handleFormSubmit}),r.a.createElement(J,{imageName:this.state.imageName,pageScroll:this.pageScroll}),r.a.createElement(u.a,{autoClose:2e3}))}}]),a}(n.Component);l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(K,null)),document.getElementById("root"))},6:function(e,t,a){e.exports={searchbar:"Searchbar_searchbar__33bli",form:"Searchbar_form__22vu4",button:"Searchbar_button__2_hru",input:"Searchbar_input__3Nyaa"}},9:function(e,t,a){e.exports={ImageGallery:"ImageGallery_ImageGallery__3VHJF",Title:"ImageGallery_Title__3_71N"}}},[[19,1,2]]]);
//# sourceMappingURL=main.41e00a6d.chunk.js.map